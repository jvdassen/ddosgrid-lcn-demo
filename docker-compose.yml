version: '3'
services:
#  tor:
#    image: "goldy/tor-hidden-service:0.4.0.5"
#    environment:
#      # Set mapping ports
#      SERVICE_TOR_SERVICE_HOSTS: 80:ddosgridapi:3000
#      # Set private key
#      SERVICE_TOR_SERVICE_KEY: |
#        -----BEGIN RSA PRIVATE KEY-----
#                ....
#        -----END RSA PRIVATE KEY-----
  ddosgridapi:
    ports:
      - "8080:8080"
#    image: "ddosgrid/ddosgrid-api"
    build: "."
    volumes:
      - userdata:/usr/src/app/api/data/
    command:
      - /usr/src/app/api/scripts/start_dev_server.sh
  ddosgridfrontend:
    ports:
      - "8081:80"
    build: "./frontend"
volumes:
  userdata:
